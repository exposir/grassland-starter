
# 有趣的题目

[https://q.shanyue.tech/weekly/](https://q.shanyue.tech/weekly/)

[https://github.com/exposir/fe-interview/blob/master/category/history.md](https://github.com/exposir/fe-interview/blob/master/category/history.md)

## 深拷贝、浅拷贝

## JS 实现观察者模式

## 实现 compose 函数

```js
function power(x) {
  return x * 10;
}
function add(x) {
  return x + 5;
}

function dele(x) {
  return x - 1;
}

function compose(...funcs) {
  if (funcs.length === 0) {
    return (arg) => arg;
  }

  if (funcs.length === 1) {
    return funcs[0];
  }

  return funcs.reduce(
    (a, b) =>
      (...args) =>
        a(b(...args))
  );
}
const a = compose(dele, power, add);
```

## 箭头函数 this 指向

```js
let name = "124";
let obj = {
  name: "456",
  get1: () => {
    console.log(this); // {Window,....}
    console.log(this.name); // ''
  },
  get2: function () {
    console.log(this.name); //456
  },
  get3: function () {
    setTimeout(function () {
      console.log(this.name); // ''
    }, 0);
  },
};
```

## await

```js
async function async1() {
  console.log(1);
  await async2();
  console.log(2);
}

async function async2() {
  console.log(3);
}
async1();
new Promise((resolve, reject) => {
  console.log(4);
  resolve();
  console.log(6);
}).then(() => {
  console.log(5);
});
```

## 闭包

```js
for (var i = 0; i < 10; i++) {
  setTimeout(function () {
    console.log(new Date(), i);
  }, 1000);
}
console.log(new Date(), i);
```

 改造

```js
for (var i = 0; i < 10; i++) {
  (function (i) {
    setTimeout(function () {
      console.log(new Date(), i);
    }, 1000);
  })(i);
}
console.log(new Date(), i);
```

## 对象 this

```js
function Person(name) {
  this.name = name;
  this.getName = () => this.name;
}
const cat = new Person("jing");
console.log(cat.getName());
const { getName } = cat;
console.log(getName());
```

## settimeout

```js
const object = {
  message: "hello world",
  logMessage() {
    console.log(this);
    console.log(this.message);
  },
};
setTimeout(object.logMessage, 1000);
setTimeout(function () {
  object.logMessage();
}, 1000);
```

## 指向 window

```js
var length = 4;
function callback() {
  console.log(this.length);
}
const object = {
  length: 5,
  method(callback) {
    callback();
  },
};
object.method(callback);
```

## 立即执行函数的 this

```js
var myObject = {
  foo: "bar",
  func: function () {
    var self = this;
    console.log(this.foo);
    console.log(self.foo);
    (function () {
      console.log(this.foo);
      console.log(self.foo);
    })();
  },
};
myObject.func();
```

## 防抖 debounce

- 连续点击，最后一次点击一秒后执行一次。

```js
function debounce(fn, delay) {
  let timer = null;
  return () => {
    if (timer) {
      clearTimeout(timer);
    }
    timer = setTimeout(() => {
      fn();
    }, delay);
  };
}

const get = () => {
  console.log("debounce");
};
a = debounce(get, 1000);
a();
```

## 节流 throttle

- 连续点击，每隔一秒执行一次。

```js
function throttle(fn, time) {
  let begin = new Date();
  return function () {
    if (new Date() - begin < time) {
      return false;
    }
    fn();
    begin = new Date();
  };
}

const get = () => {
  console.log(666);
};
a = throttle(get, 1000);
```
